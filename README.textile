notextile. <div class="txp-layout">
<div class="txp-layout-1col">

h1(txp-heading). oui_cookie

notextile. </div>
<div class="txp-layout-4col-alt">
<section class="txp-details">

h3. Table of contents

notextile. <div role="group">

*(switcher-list) "Plugin requirements":#requirements
* "Basics":#basics
* "Installation":#install
* "Tags":#tags
**{list-style:none; padding-left:0;}.
**{padding-left:2em;} "oui_cookie":#oui_cookie
**{padding-left:2em;} "oui_if_cookie":#oui_if_cookie
* "Examples":#examples
**{list-style:none; padding-left:0;}.
**{padding-left:2em;} "Front end articles sorting":#sort_by
**{padding-left:2em;} "Last viewed article":#last_viewed
**{padding-left:2em;} "EU cookies warning":#eu_cookies
* "Author":#author
* "Licence":#licence

notextile. </div>
</section>

"(navlink)See on Github":https://github.com/NicolasGraph/oui_cookie "(navlink)Donate":https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=PREHX3MZMXEUN

notextile. </div>
<div class="txp-layout-4col-3span">

notextile. <hr id="basics" />

h2. Basics

Set, check, read, reset or delete cookies manually or through HTTP variables.

p(alert-block warning). %(ui-icon ui-icon-alert).% According to the EU legislation you must warn your users if your website set cookies.

notextile. <hr id="requirements" />

h2. Plugin requirements

oui_cookie requires Textpattern 4.6+.

notextile. <hr id="install" />

h2. Installation

# Paste the content of the plugin file under the *Admin > Plugins* tab, upload, install and enable it;
# Set your tags…

notextile. <hr id="tags" />

h2. tags

h3(#oui_cookie). oui_cookie

bc. <txp:oui_cookie name="…" />

or

bc.. <txp:oui_cookie name="…">
    […]
</txp:oui_cookie>

h4. Attributes

h5. Required

- @name@ :=
The cookie (and HTTP variable) name you want to use. If no other attibutes are defined, the tag will read and display the related value.
*Default:* none =:

h5. Manually set a cookie

- @value@ :=
A value to manually set the named cookie.
You can also set the cookie value by using a continer tag like you would for a variable.
*Default:* none =:

h5. Set a cookie through a HTTP variable

- @values@ :=
A comma separated list of accepted values for the url variable and its cookie.
*Default:* none =:
- @default@ :=
A default value.
If set, the plugin conditional tag will always be true if not check against a defined value.
*Default:* none =:

h5. Optional cookie settings

- @duration@ :=
The duration of the cookie.
*Default:* +1 day
*Valid:* A "strtotime":http://php.net/manual/fr/function.strtotime.php value =:

h5. Delete a cookie

- @delete@ :=
If set to @1@ this attribute will delete the named cookie.
*Default:* @0@
*Valid:* @0@ or @1@ =:

h3(#oui_cookie). oui_if_cookie

bc.. <txp:oui_if_cookie name="…">
    […]
<txp:else />
    […]
</txp:oui_if_cookie>

p. This tag checks the status or the value of the cookie (and/or the related HTTP variable) defined by the @name@ attribute.

h4. Attributes

h5. Required

- @name@* :=
The cookie (and HTTP variable) name you want to use.
*Default:* none =:
- @value@ :=
A value to check against the cookie (and/or the HTTP variable) value.
*Default:* none =:

[*] _Required._

notextile. <hr id="examples" />

h2. Examples

h3(#sort_by). Front end articles sorting

List the sort options you want to use:

bc.. <select onchange="window.location.href=this.value">
    <option value="" disabled selected>Sort by</option>
    <option value="?sort_by=custom_1">Size</option>
    <option value="?sort_by=custom_2">Weight</option>
</select>

p. Then, catch the HTTP variable sent by this list to store it (useful to keep the sort order pages after pages).

bc. <txp:oui_cookie name="sort_by" values="custom_1, custom_2" default="custom_1" />

Now use the new value as the value of the @sort@ attribute of your article tag.

bc. <txp:article sort='<txp:oui_cookie name="sort_by" />' />

h3(#last_viewed). Last viewed article

Store the current article id in a cookie:

bc. <txp:if_individual_article>
    <txp:oui_cookie name="last_article" value='<txp:article_id />' />
</txp:if_individual_article>

Now, use the following code anywhere you want to display the last viewed article.

bc. <txp:if_cookie name="last_article">
    <txp:article_custom id='<txp:oui_cookie name="last_article" />' />
</txp:if_cookie>

h3(#eu_cookies). EU cookies Warning

bc.. <txp:oui_cookie name="accept_cookies" values="yes" />

<txp:oui_if_cookie name="accept_cookies">
<txp:else />
    This website uses cookies. <a href="?accept_cookies=yes">I accept!</a>
</txp:oui_if_cookie>

h2(#author). Author

"Nicolas Morand":https://twitter.com/NicolasGraph, inspired by a "Jukka Svahn":http://rahforum.biz/ "tip":http://textpattern.tips/setting-cookies-for-eu-legislation.

h2(#licence). Licence

This plugin is distributed under "GPLv2":http://www.gnu.org/licenses/gpl-2.0.fr.html.

notextile. </div>
